<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Score Overlay</title>
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@700;900&display=swap" rel="stylesheet">

<style>
body{margin:0;background:transparent;font-family:'Rubik',sans-serif;}

.scorebox{
  width:520px;
  border-radius:14px;
  overflow:hidden;
  background:linear-gradient(#ddd,#9a9a9a);
  box-shadow:0 6px 20px rgba(0,0,0,.6);
}

.teambar{
  text-align:center;
  padding:8px;
  font-weight:900;
  font-size:28px;
}

.mainrow{display:flex;}

.score{
  flex:1;
  background:#000;
  color:#fff;
  font-size:60px;
  font-weight:900;
  display:flex;
  align-items:center;
  justify-content:center;
}

.score.flip{animation:flip .4s ease;}
@keyframes flip{40%{transform:rotateX(90deg);}}

.oversBox{
  width:160px;
  background:#1c3f91;
  color:#fff;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}

.oversTitle{font-size:18px;opacity:.8;}
.overs{font-size:36px;font-weight:900;}

.bats{
  background:#555;
  color:#fff;
  font-size:22px;
}

.batRow{
  display:flex;
  justify-content:space-between;
  padding:6px 12px;
}
</style>
</head>

<body>

<div class="scorebox">

  <div class="teambar" id="team">TEAM</div>

  <div class="mainrow">
    <div class="score" id="score">0-0</div>

    <div class="oversBox">
      <div class="oversTitle">OVERS</div>
      <div class="overs" id="overs">0.0</div>
    </div>
  </div>

  <div class="bats">
    <div class="batRow">
      <span id="bat1"></span>
      <span id="bat1s"></span>
    </div>

    <div class="batRow">
      <span id="bat2"></span>
      <span id="bat2s"></span>
    </div>
  </div>

</div>

<script>
const FEED="https://script.google.com/macros/s/AKfycbwlLGzKbfTMjPwhwzTHw5RWmfTCzWrm4RMECbkY2dl7uP8NgqNr7tUul513DQpbUFzGLw/exec";

const CB="scoreCB";
let lastScore="";

function load(){
  const s=document.createElement("script");
  s.src=FEED+"?callback="+CB+"&_="+Date.now();
  document.body.appendChild(s);
  s.onload=()=>s.remove();
}

setInterval(load,1000);

function scoreCB(d){
  if(!d) return;

  team.textContent=d.team;

  if(d.score!==lastScore){
    score.classList.remove("flip");
    void score.offsetWidth;
    score.textContent=d.score;
    score.classList.add("flip");
    lastScore=d.score;
  }

  overs.textContent=d.overs;

  bat1.textContent=d.batsmen[0].name+"*";
  bat1s.textContent=d.batsmen[0].runs;

  bat2.textContent=d.batsmen[1].name;
  bat2s.textContent=d.batsmen[1].runs;
}
</script>

</body>
</html>
